{"name":"Preceptor-webdriver","tagline":"WebDriver plugin for the Preceptor test-runner and aggregator","body":"Preceptor-WebDriver (Plugin)\r\n============================\r\n\r\nPreceptor client-decorator plugin to inject WebDriver (Selenium) code into testing clients, simpifying the test setup and tear-down for Selenium tests by configuring it in one centralized configuration file. \r\n\r\n[![Build Status](https://secure.travis-ci.org/yahoo/preceptor-webdriver.png)](http://travis-ci.org/yahoo/preceptor-webdriver)\r\n[![npm version](https://badge.fury.io/js/preceptor-webdriver.svg)](http://badge.fury.io/js/preceptor-webdriver)\r\n\r\n[![NPM](https://nodei.co/npm/preceptor-webdriver.png?downloads=true)](https://nodei.co/npm/preceptor-webdriver/)\r\n\r\n\r\n[API-Documentation](http://yahoo.github.io/preceptor-webdriver/docs/)\r\n\r\n[Coverage Report](http://yahoo.github.io/preceptor-webdriver/coverage/lcov-report/)\r\n\r\n\r\n**Table of Contents**\r\n* [Installation](#installation)\r\n* [Usage](#usage)\r\n* [Services](#services)\r\n    * [WebDriver - Client-Decorator](#webdriver---client-decorator)\r\n        * [Configuration](#configuration)\r\n        * [WebDriver Clients](#webdriver-clients)\r\n            * [Configuration](#configuration-1)\r\n            * [Cabbie](#cabbie)\r\n            * [External](#external)\r\n        * [WebDriver Servers](#webdriver-servers)\r\n            * [Configuration](#configuration-3)\r\n            * [BrowserStack](#browserstack)\r\n            * [ChromeDriver](#chromedriver)\r\n            * [External](#external-1)\r\n            * [GhostDriver](#ghostdriver)\r\n            * [SauceLabs](#saucelabs)\r\n            * [Selenium Stand-Alone](#selenium)\r\n        * [Coverage](#coverage)\r\n* [Plugins](#plugins)\r\n    * [Client-Plugin](#client-plugin)\r\n    * [Server-Plugin](#server-plugin)\r\n    * [Example](#example-3)\r\n* [API-Documentation](#api-documentation)\r\n* [Tests](#tests)\r\n* [Third-party libraries](#third-party-libraries)\r\n* [License](#license)\r\n\r\n\r\n##Installation\r\n\r\nInstall this module with the following command:\r\n```shell\r\nnpm install preceptor-webdriver\r\n```\r\n\r\nAdd the module to your ```package.json``` dependencies:\r\n```shell\r\nnpm install --save preceptor-webdriver\r\n```\r\nAdd the module to your ```package.json``` dev-dependencies:\r\n```shell\r\nnpm install --save-dev preceptor-webdriver\r\n```\r\n\r\n##Usage\r\n\r\nIn your Preceptor configuration, add this plugin package-name to the ```plugins``` list in the global configurations section. Preceptor will automatically load and initialize the plugin, and this plugin will be from then on available to all tasks.\r\n\r\n```javascript\r\n{\r\n\t// ...\r\n\tplugins: ['preceptor-webdriver']\r\n\t// ...\r\n}\r\n```\r\n\r\nAfterwards, the Web-Driver client-decorator plugin can be configured:\r\n```javascript\r\n{ // Preceptor task configuration\r\n\t\"type\": \"mocha\",\r\n  \r\n\t// ...\r\n  \r\n\t\"decorator\": [\r\n\t\t{\r\n\t\t\t\"type\": \"webDriver\", // Id of this module when registered in Preceptor\r\n      \r\n\t\t\t\"configuration\": {\r\n\t\t\t\t\"isolation\": true, // Runs in isolation mode\r\n  \t  \t\r\n\t\t\t\t\"client\": { // Client configuration\r\n\t\t\t\t\t\"type\": \"cabbie\",\r\n\t\t\t\t\t\"configuration\": {\r\n\t\t\t\t\t\t\"mode\": \"sync\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"capabilities\": {\r\n\t\t\t\t\t\t\"browserName\": \"firefox\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n  \t  \t\r\n\t\t\t\t\"server\": { // Server configuration\r\n\t\t\t\t\t\"type\": \"selenium\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t],\r\n  \r\n\t// ...\r\n}\r\n```\r\n\r\n##Services\r\n\r\nThis plugin provides the following services for Preceptor:\r\n* ```webDriver``` (ClientDecorator) - Adds a  client-decorator to Preceptor that can inject WebDriver code into Preceptor clients\r\n\r\n###WebDriver - Client-Decorator\r\nThe WebDriver client-decorator is loaded for each Preceptor task and executes code at different stages of a tests testing lifecycle. See the Preceptor project page for more information about the testing lifecycle.\r\nThis module has its own plugin management, providing different clients and servers for the Selenium testing infrastructure. \r\n\r\n####Configuration\r\nThe Web-Driver client-decorator has the following configuration options:\r\n* ```isolation``` {boolean} - If set, the Web-Driver client and server will run in Isolation-mode, meaning that every test will run in its own browser instance instead of sharing the browser session with multiple test (default: false). When isolation mode is turned on, the test will take significantly longer, but they will be more independent from each other.\r\n* ```coverage``` {object} - Coverage configuration. See below for more information.\r\n* ```client``` {object} - Client configuration object. See below for more information on how to configure the client.\r\n* ```server``` {object} - Server configuration object. See below for more information on how to configure the server.\r\n\r\n#####Example\r\n```javascript\r\n\"configuration\": {\r\n\t\"isolation\": true,\r\n\t\"server\": {\r\n\t\t\"type\": \"selenium\",\r\n\t\t\"configuration\": {\r\n\t\t\t\"port\": \"4444\"\r\n\t\t},\r\n\t\t\"timeOut\": 10000\r\n\t},\r\n\t\"client\": {\r\n\t\t\"type\": \"cabbie\",\r\n\t\t\"configuration\": {\r\n\t\t\t\"mode\": \"sync\",\r\n\t\t\t\"debug\": true\r\n\t\t},\r\n\t\t\"capabilities\": {\r\n\t\t\t\"browserName\": \"firefox\",\r\n      \r\n\t\t\t\"acceptSslCerts\": true,\r\n\t\t\t\"cssSelectorsEnabled\": true,\r\n\t\t\t\"javascriptEnabled\": true,\r\n\t\t\t\"takesScreenshot\": true,\r\n\t\t\t\"handlesAlerts\": true,\r\n\t\t\t\"unexpectedAlertBehavior\": 'accept'\r\n\t\t},\r\n\t\t\"url\": \"http://127.0.0.1:4444/wd/hub\"\r\n\t}\r\n}\r\n```\r\n\r\n####WebDriver Clients\r\nFollowing clients are included with this module:\r\n* ```cabbie``` - Simple web-driver client that supports synchronous and asynchronous Selenium testing\r\n* ```external``` - A placeholder plugin that lets the testing-framework use its own web-driver client without interfering with other already existing and possibly loaded WebDriver clients.\r\n\r\nAny additional Web-Driver clients can be added by importing them through the Preceptor plugin manager. See the Plugin section below for more information.\r\n\r\n#####Configuration\r\nEvery Web-Driver client has configuration options that are the same across all Web-Driver clients. These options are:\r\n* ```type``` {string} - Name of client-plugin (default: external)\r\n* ```configuration``` {object} - Client specific configuration. All the additional configuration options supplied below should be defined in this object.\r\n* ```capabilities``` {object} - Capabilities required by the client. These are the standard Selenium capabilities that the client requests from the server.\r\n* ```url``` {string} - Url of the Selenium server. This may be automatically pre-filled by the selected server plugin.\r\n\r\n######Example\r\n```javascript\r\n\"client\": {\r\n\t\"type\": \"cabbie\",\r\n\t\"configuration\": {\r\n\t\t\"mode\": \"sync\",\r\n\t\t\"debug\": true\r\n\t},\r\n\t\"capabilities\": {\r\n\t\t\"browserName\": \"firefox\",\r\n      \r\n\t\t\"acceptSslCerts\": true,\r\n\t\t\"cssSelectorsEnabled\": true,\r\n\t\t\"javascriptEnabled\": true,\r\n\t\t\"takesScreenshot\": true,\r\n\t\t\"handlesAlerts\": true,\r\n\t\t\"unexpectedAlertBehavior\": 'accept'\r\n\t},\r\n\t\"url\": \"http://127.0.0.1:4444/wd/hub\"\r\n}\r\n```\r\n\r\n#####Cabbie\r\nCabbie is a lightweight Selenium client that supports synchronous and asynchronous testing. For more information, visit the project page at: https://github.com/ForbesLindesay/cabbie\r\n\r\n######Configuration\r\nThe web-driver client plugin exposes the following configuration options in the Preceptor client-decorator configuration:\r\n* ```mode``` {string} - Type of execution mode. Following types are supported: 'sync', 'async'\r\n* ```debug``` {boolean} - Turns the debug-mode on, printing out every low-level method executed. (default: false)\r\n* ```httpDebug``` {boolean} Turns the HTTP debug-mode on, printing out every request and response to the WebDriver server. For this option to work, ```debug``` must also be turned on. (default: false)\r\n\r\n#####External\r\nThis is a placeholder plugin for the Web-Driver client that will not do anything; it is just there to satisfy the client-decorators need to have a client select. This client should be used if the Preceptor testing client supplies its own Web-Driver client.\r\n\r\n####WebDriver Servers\r\nFollowing servers are included in this module:\r\n* ```browserStack``` - Uses the Browser-Stack cloud services as a Selenium server\r\n* ```chromeDriver``` - Starts the ChromeDriver locally to execute tests in the local Chrome browser\r\n* ```external``` - A placeholder plugin that lets the testing-framework use its own Web-Driver server\r\n* ```ghostDriver``` - Starts ghost-driver on top of PhantomJs to execute tests headlessly on PhantomJs, running it on the local machine\r\n* ```sauceLabs``` - Uses the SauceLabs cloud services as a Selenium server\r\n* ```selenium``` - Starts the Selenium stand-alone server locally to run any hub connected browsers\r\n\r\nAny additional Web-Driver servers can be added by importing them through the Preceptor plugin manager. See the Plugin section below for more information.\r\n\r\n#####Configuration\r\nEvery Web-Driver server has configuration options that are the same across all Web-Driver servers. These options are:\r\n* ```type``` {string} - Name of server-plugin (default: external)\r\n* ```configuration``` {object} - Server specific configuration. All the additional configuration options supplied below should be defined in this object.\r\n* ```timeOut``` {int} - Timeout for the server to start up. (default: 15000 ms)\r\n\r\n######Example\r\n```javascript\r\n\"server\": {\r\n\t\"type\": \"selenium\",\r\n\t\"configuration\": {\r\n\t\t\"port\": \"4444\"\r\n\t},\r\n\t\"timeOut\": 10000\r\n}\r\n```\r\n\r\n#####BrowserStack\r\nThe ```browserStack``` server plugin will provision a Web-Driver server in the Browser-Stack cloud and will make it available to be used by the Preceptor client thorugh an url.\r\n\r\n######Configuration\r\nFor this plugin to work, it needs to supply the following configuration options:\r\n* ```user``` {string} - User to be used to access the cloud services\r\n* ```accessKey``` {string} - Access-key for the user to access the cloud services\r\n\r\n#####ChromeDriver\r\nThe ChromeDriver will be started locally, connecting Preceptor clients with the local instance of the Chrome browser. There is no need for a Selenium hub when using this plugin since the ChromeDriver will function as a hub on its own.\r\nThis server plugin does not add any configuration options. This server uses port '9515' for Selenium communication.\r\n\r\n######Modules required\r\nFor this plugin to work, you need to add the following modules to your package.json:\r\n* ```chromedriver``` - Module supplying the Chrome-Driver binary\r\n\r\n#####External\r\nThis is a placeholder plugin for the web-driver server; it doesn't start or stop any server. However, it provides the client with a url to connect to. The plugin first checks if an environment variable with the name ```SELENIUM_HUB_URL``` is available and uses that, otherwise it will use ```http://127.0.0.1:4444/wd/hub``` as default since it is the default address for a locally running Selenium stand-alone server.\r\nThis server plugin does not add any configuration options.\r\n\r\n#####GhostDriver\r\nThe GhostDriver plugin will start and stop PhantomJs with GhostDriver listening on a given port. It will also automatically set the ```browserName``` option in the client capabilities to ```phantomjs``` if none was given. The server-url will always be set to ```http://127.0.0.1:<port>/```.\r\n\r\n######Configuration\r\n* ```port``` {int} - Port on which GhostDriver should listen on (default: 9517)\r\n\r\n######Modules required\r\nFor this plugin to work, you need to add the following modules to your package.json:\r\n* ```phantomjs``` - Module supplying the PhantomJs binary\r\n\r\n#####SauceLabs\r\nThe ```sauceLabs``` server plugin will provision a Web-Driver server in the SauceLabs cloud and will make it available to be used by the Preceptor client through an url.\r\n\r\n######Configuration\r\nFor this plugin to work, it needs to supply the following configuration options:\r\n* ```user``` {string} - User to be used to access the cloud services\r\n* ```accessKey``` {string} - Access-key for the user to access the cloud services\r\n\r\n#####Selenium\r\nThe ```selenium``` server plugin will start and stop the Selenium stand-alone server on the local machine.\r\n\r\n######Configuration\r\n* ```javaPath``` {string} - (optional) Path to the java binary to run the jar file. Should no ```javaPath``` be supplied, then the plugin will try to determine the path using the ```JAVA_HOME``` environment variable or will use ```/usr/bin/java``` as default path.\r\n* ```port``` {int} - Port on which the Selenium stand-alone server should listen on (default: 9518)\r\n\r\n######Modules required\r\nFor this plugin to work, you need to add the following modules to your package.json:\r\n* ```selenium-server-standalone-jar``` - Module supplying the Selenium stand-alone jar file\r\n\r\n####Coverage\r\nThe Web-Driver decorator supports coverage reporting, supplying the coverage data to Preceptor and merging the coverage reports from client and server.\r\n\r\n#####Configuration\r\nThe following configuration options are available for code-coverage that is accessible through the decorator configuration as ```coverage```:\r\n* ```active``` {boolean} - Actives the coverage collection and merging (default: false)\r\n* ```coverageVar``` {string} - Coverage variable in the browser that should be used to collect the coverage-data (default: \"__coverage__\")\r\n* ```mapping``` {object[]} - List of path-mapping for client/server mapping. The objects consist of the ```from``` and ```to```property, describing the from-to of mapping.\r\n* ```excludes``` {string[]} - List of paths to exclude (default: ['**/node_modules/**', '**/test/**', '**/tests/**'])\r\n\r\n##Plugins\r\nIt is possible to add your own client- or server-plugin to this WebDriver module by using the ```AbstractClient``` or ```AbstractServer``` objects which are made available by this module. Afterwards, the plugin needs to be added to the ```plugins``` list in the global configuration section of the Preceptor configuration file. See the Preceptor project for more information on how to register a Preceptor plugin.\r\n\r\nThe following API's are available for server and client plugins (see API documentation for more information):\r\n###Client-Plugin\r\n* ```WebDriverManager.AbstractClient``` - Abstract object, implementing common functionality for WebDriver clients.\r\n* ```manager.getClientList()``` - Gets a dictionary of available client plugins\r\n* ```manager.hasClient()``` - Checks existence of a client plugin\r\n* ```manager.getClient()``` - Gets a specific client plugin by name\r\n* ```manager.registerClient()``` - Registers a new client plugin\r\n\r\n###Server-Plugin\r\n* ```WebDriverManager.AbstractServer``` - Abstract object, implementing common functionality for WebDriver servers.\r\n* ```manager.getServerList()``` - Gets a dictionary of available server plugins\r\n* ```manager.hasServer()``` - Checks existence of a server plugin\r\n* ```manager.getServer()``` - Gets a specific server plugin by name\r\n* ```manager.registerServer()``` - Registers a new server plugin\r\n\r\n###Example\r\n```javascript\r\n{\r\n\t// ...\r\n\tplugins: ['preceptor-webdriver', 'preceptor-webdriver-custom']\r\n\t// ...\r\n}\r\n```\r\nMake sure that this module is listed before your plugin module so that the WebDriver plugin is already registered when your plugin should be registered.\r\n\r\n##API-Documentation\r\n\r\nGenerate the documentation with following command:\r\n```shell\r\nnpm run docs\r\n```\r\nThe documentation will be generated in the ```docs``` folder of the module root.\r\n\r\n##Tests\r\n\r\nRun the tests with the following command:\r\n```shell\r\nnpm run test\r\n```\r\nThe code-coverage will be written to the ```coverage``` folder in the module root.\r\n\r\n##Third-party libraries\r\n\r\nThe following third-party libraries are used by this module:\r\n\r\n###Dependencies\r\n* promise: https://github.com/then/promise\r\n* preceptor: https://github.com/yahoo/preceptor\r\n* preceptor-core: https://github.com/yahoo/preceptor-core\r\n* underscore: http://underscorejs.org\r\n* minimatch: https://github.com/isaacs/minimatch\r\n* selenium-server-standalone-jar: https://github.com/adamhooper/selenium-server-standalone-jar\r\n\r\n###Dev-Dependencies\r\n* cabbie: https://github.com/ForbesLindesay/cabbie\r\n* chai: http://chaijs.com\r\n* istanbul: https://github.com/gotwarlost/istanbul\r\n* mocha: https://github.com/visionmedia/mocha\r\n* yuidocjs: https://github.com/yui/yuidoc\r\n\r\n###Optional-Dependecies:\r\n* chromedriver: https://github.com/giggio/node-chromedriver\r\n* phantomjs: https://github.com/Obvious/phantomjs\r\n\r\n##License\r\n\r\nThe MIT License\r\n\r\nCopyright 2014 Yahoo Inc.\r\n","google":"UA-56408730-1","note":"Don't delete this file! It's used internally to help with page regeneration."}